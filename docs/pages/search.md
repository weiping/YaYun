# 搜索页面说明文档

## 页面概述

搜索页面是雅韵App中的核心功能页面之一，提供了多种方式帮助用户发现和查找音乐内容。页面设计遵循iOS设计规范，采用简洁明了的布局和流畅的交互体验，符合design.md文档中的设计规范。

## 页面结构

搜索页面主要由以下几个部分组成：

1. **顶部状态栏**：显示时间、电池和网络状态等信息
2. **页面标题和搜索框**：显示"搜索"标题和主搜索输入框
3. **分类浏览区域**：以网格方式展示主要分类入口，包括作曲家、乐器、时期和风格
4. **搜索热榜**：展示当前热门搜索词，按热度排序
5. **搜索历史**：展示用户的历史搜索记录
6. **搜索结果区域**：输入搜索内容后显示，包括专辑、曲目和艺术家等分类结果
7. **播放控制条**：显示当前播放内容和控制按钮
8. **底部导航栏**：包含首页、发现、搜索和我的四个主要导航入口

## 页面功能

### 搜索功能
- **实时搜索建议**：输入时动态显示匹配的搜索建议
- **搜索历史管理**：记录用户搜索历史，提供一键清除功能
- **热榜推荐**：展示当前热门搜索词，帮助用户发现流行内容
- **分类搜索**：提供按作曲家、乐器、时期、风格等维度的分类入口
- **多类型结果展示**：搜索结果按专辑、曲目、艺术家等分类展示

### 主题切换
- **深色/浅色模式**：支持系统主题自动切换和手动切换
- **主题持久化**：使用localStorage存储用户主题偏好
- **跨页面同步**：与其他页面保持主题设置一致性

### 交互效果
- **粒子动画**：点击操作时生成粒子效果，提升视觉反馈
- **平滑过渡**：搜索结果显示/隐藏时使用过渡动画
- **实时反馈**：输入时实时显示清除按钮和搜索建议

## 实现细节

### HTML结构
- 使用语义化HTML标签组织页面结构
- 采用Tailwind CSS进行样式设计
- 页面宽度固定为375px，符合iPhone 15 Pro设备尺寸

### CSS样式
- 使用CSS变量定义主题色彩，便于主题切换
- 采用Flexbox和Grid布局，实现响应式设计
- 通过媒体查询适配不同设备和主题模式
- 实现毛玻璃效果和卡片阴影，提升UI质感

### JavaScript功能
- 搜索输入处理和实时建议
- 历史记录管理
- 主题切换和同步
- 粒子动画效果
- 页面状态管理（主内容/搜索结果切换）

### 主题切换实现
搜索页面的主题切换功能通过toggleTheme函数实现，包括以下步骤：
1. 切换body元素的dark类
2. 更新UI组件的样式（状态栏、导航栏、播放条等）
3. 处理特定组件的颜色调整
4. 保存主题设置到localStorage
5. 在iframe嵌入模式下，保持与父页面主题一致

搜索页面支持三种主题初始化方式：
1. 优先使用父页面的主题设置（iframe模式）
2. 其次使用本地存储的主题设置
3. 最后才使用系统主题偏好

## 兼容性与优化

- **兼容Safari**：使用兼容性更强的事件监听方法
- **性能优化**：使用requestAnimationFrame进行动画处理
- **离线支持**：使用localStorage存储搜索历史和主题偏好
- **体验优化**：实现平滑的过渡动画和交互反馈

## 后续优化方向

- 添加语音搜索功能
- 实现更精准的搜索算法
- 增加按时长、曲风等高级筛选功能
- 优化搜索结果的排序逻辑
- 添加搜索结果无限滚动加载 